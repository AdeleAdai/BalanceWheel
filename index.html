<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜¿å‘†çš„ç”Ÿå‘½å¹³è¡¡è½® - Ah Dai's Wheel of Life</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7' }, // Blue
                        vision: { 500: '#f97316', 600: '#ea580c' } // Orange
                    },
                    fontFamily: { sans: ['Noto Sans SC', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        body { background-color: #f8fafc; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            button { display: none !important; }
        }
    </style>
</head>
<body class="text-slate-700 antialiased min-h-screen flex flex-col items-center py-8 px-4">

    <main class="w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden min-h-[600px] relative">
        
        <div class="h-2 bg-slate-100 w-full">
            <div id="progress-bar" class="h-full bg-brand-500 transition-all duration-500" style="width: 0%"></div>
        </div>

        <div id="app-content" class="p-6 md:p-10">
            </div>

    </main>

    <footer class="mt-8 text-slate-400 text-sm text-center no-print">
        <p>Â© 2025 é˜¿å‘†çš„ç”Ÿå‘½å¹³è¡¡è½® | Designed for Awareness</p>
    </footer>

    <script>
        // --- æ ¸å¿ƒæ•°æ®çŠ¶æ€ ---
        const state = {
            step: 0,
            dimensions: ['äº‹ä¸šå‘å±•', 'å®¶åº­äº²å¯†', 'èº«ä½“å¥åº·', 'è´¢åŠ¡çŠ¶å†µ', 'äººé™…å…³ç³»', 'ä¸ªäººæˆé•¿', 'å¨±ä¹ä¼‘é—²', 'å¿ƒçµ/ç²¾ç¥'],
            currentScores: {}, // Step 1 data
            visionScores: {},  // Step 2 data
            journalEntries: {}, // Free text for each step
            focusArea: '',      // Step 3 choice
            microAction: { what: '', when: '' } // Step 4 data
        };

        // --- DOM å…ƒç´ å¼•ç”¨ ---
        const contentDiv = document.getElementById('app-content');
        const progressBar = document.getElementById('progress-bar');
        let myChart = null; // Chart å®ä¾‹

        // --- åˆå§‹åŒ– ---
        function init() {
            // åˆå§‹åŒ–åˆ†æ•°
            state.dimensions.forEach(d => {
                state.currentScores[d] = 5;
                state.visionScores[d] = 5;
            });
            renderStep0();
        }

        // --- æ¸²æŸ“è¾…åŠ©å‡½æ•° ---
        function updateProgress(percent) {
            progressBar.style.width = `${percent}%`;
        }

        function createTextarea(id, placeholder) {
            return `
                <textarea id="${id}" 
                    class="w-full h-32 p-4 mt-4 text-slate-700 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent outline-none resize-none transition-all placeholder:text-slate-400"
                    placeholder="${placeholder}">${state.journalEntries[state.step] || ''}</textarea>
            `;
        }

        function saveJournal(step) {
            const el = document.getElementById(`journal-${step}`);
            if (el) state.journalEntries[step] = el.value;
        }

        // --- Step 0: Setup (è‡ªå®šä¹‰ç»´åº¦) ---
        function renderStep0() {
            updateProgress(10);
            let dimListHtml = state.dimensions.map((dim, index) => `
                <div class="flex items-center gap-2 mb-2">
                    <input type="text" value="${dim}" data-index="${index}" 
                        class="dim-input flex-1 p-2 bg-slate-50 border border-slate-200 rounded text-slate-700 focus:outline-none focus:border-brand-500"
                        onchange="updateDimensionName(${index}, this.value)">
                    <button onclick="removeDimension(${index})" class="text-slate-400 hover:text-red-500 p-2" ${state.dimensions.length <= 6 ? 'disabled style="opacity:0.3"' : ''}>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z" clip-rule="evenodd" /></svg>
                    </button>
                </div>
            `).join('');

            contentDiv.innerHTML = `
                <div class="fade-in">
                    <h1 class="text-2xl font-bold text-slate-800 mb-2">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ä½ çš„ç”Ÿæ´»ç»´åº¦</h1>
                    <p class="text-slate-500 mb-6">æ‹¿ä¸€å¼ ç™½çº¸ï¼Œç”»ä¸€ä¸ªå¤§åœ†åœˆï¼Œåƒåˆ‡è›‹ç³•ä¸€æ ·åˆ‡åˆ†ä½ çš„äººç”Ÿã€‚é»˜è®¤è¿™é‡Œæœ‰8å—â€˜è›‹ç³•â€™ï¼Œä½ å¯ä»¥ä¿®æ”¹å®ƒä»¬çš„åå­—ï¼Œæˆ–è€…å¢å‡æ•°é‡ï¼ˆ6-10ä¸ªï¼‰ï¼Œè®©å®ƒå®Œå…¨å±äºä½ ã€‚</p>
                    
                    <div class="mb-6 max-h-[300px] overflow-y-auto no-scrollbar">
                        ${dimListHtml}
                        <button onclick="addDimension()" class="mt-2 w-full py-2 border-2 border-dashed border-slate-200 text-slate-400 rounded-lg hover:border-brand-500 hover:text-brand-500 transition-colors flex items-center justify-center gap-2" ${state.dimensions.length >= 10 ? 'disabled style="display:none"' : ''}>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /></svg>
                            æ·»åŠ æ–°ç»´åº¦
                        </button>
                    </div>

                    <button onclick="goToStep1()" class="w-full bg-brand-600 hover:bg-brand-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-brand-500/30 transition-all transform active:scale-95">
                        ä¸‹ä¸€æ­¥ï¼šç°çŠ¶æ‰“åˆ†
                    </button>
                </div>
            `;
        }

        // Step 0 é€»è¾‘
        window.updateDimensionName = (index, val) => { 
            state.dimensions[index] = val; 
            // åŒæ­¥æ›´æ–° key
            state.currentScores[val] = state.currentScores[val] || 5; 
            state.visionScores[val] = state.visionScores[val] || 5;
        };
        window.addDimension = () => { if(state.dimensions.length < 10) { state.dimensions.push('æ–°ç»´åº¦'); initScoresForNew(); renderStep0(); } };
        window.removeDimension = (idx) => { if(state.dimensions.length > 6) { state.dimensions.splice(idx, 1); renderStep0(); } };
        window.initScoresForNew = () => { state.dimensions.forEach(d => { if(state.currentScores[d] === undefined) state.currentScores[d] = 5; if(state.visionScores[d] === undefined) state.visionScores[d] = 5; }); };
        window.goToStep1 = () => { state.step = 1; renderStep1(); };


        // --- Step 1: ç°çŠ¶æ‰“åˆ† (Current Reality) ---
        function renderStep1() {
            updateProgress(30);
            
            // æ„å»ºæ»‘å—
            let slidersHtml = state.dimensions.map(dim => `
                <div class="mb-4">
                    <div class="flex justify-between mb-1">
                        <label class="text-sm font-medium text-slate-700">${dim}</label>
                        <span class="text-sm font-bold text-brand-600" id="score-val-${dim}">${state.currentScores[dim]}</span>
                    </div>
                    <input type="range" min="1" max="10" value="${state.currentScores[dim]}" 
                        class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-brand-500"
                        oninput="updateScore('${dim}', this.value, 'current')">
                </div>
            `).join('');

            contentDiv.innerHTML = `
                <div class="fade-in">
                    <h1 class="text-2xl font-bold text-slate-800 mb-2">ç¬¬äºŒæ­¥ï¼šç°çŠ¶æ‰“åˆ†</h1>
                    <p class="text-slate-500 mb-6">æƒ³è±¡åœ†å¿ƒæ˜¯0åˆ†ï¼ˆä¸æ»¡æ„ï¼‰ï¼Œæœ€å¤–åœˆæ˜¯10åˆ†ï¼ˆéå¸¸æ»¡æ„ï¼‰ã€‚è¯·å‡­ç›´è§‰ä¸ºå½“ä¸‹çš„çŠ¶æ€æ‰“åˆ†ã€‚</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            ${slidersHtml}
                        </div>
                        <div class="flex items-center justify-center bg-slate-50 rounded-xl p-4">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>

                    <div class="mt-8 bg-slate-50 p-6 rounded-xl border-l-4 border-brand-500">
                        <h3 class="font-bold text-slate-800 mb-2">ğŸ‘‰ çœ‹ç€è¿™ä¸ªå›¾å½¢ï¼š</h3>
                        <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                            <li>ä½ çš„ç¬¬ä¸€æ„Ÿè§‰æ˜¯ä»€ä¹ˆï¼ŸæƒŠè®¶ã€éš¾è¿‡ï¼Œè¿˜æ˜¯æ„æ–™ä¹‹ä¸­ï¼Ÿ</li>
                            <li>çœ‹ç€åˆšæ‰å®šä¹‰çš„è¿™äº›è¯ï¼Œé™¤äº†å·¥ä½œå’Œå®¶åº­ï¼Œå“ªä¸€ä¸ªæ˜¯ä½ å¾ˆä¹…æ²¡æœ‰å¥½å¥½å…³ç…§è¿‡çš„äº†ï¼Ÿ</li>
                            <li>åœ¨è¿‡å»çš„ä¸€å¹´é‡Œï¼Œå“ªä¸ªé¢†åŸŸæœ€è®©ä½ æ„Ÿåˆ°æ»‹å…»å’Œå¿«ä¹ï¼Ÿ</li>
                        </ul>
                        ${createTextarea('journal-1', 'è¿™é‡Œæ˜¯ä½ çš„è‡ªç”±ä¹¦å†™ç©ºé—´ï¼Œè·Ÿéšç›´è§‰è®°å½•...')}
                    </div>

                    <button onclick="goToStep2()" class="mt-6 w-full bg-brand-600 hover:bg-brand-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-brand-500/30 transition-all transform active:scale-95">
                        ä¸‹ä¸€æ­¥ï¼šæç»˜æ„¿æ™¯
                    </button>
                </div>
            `;
            initChart('current');
        }

        window.updateScore = (dim, val, type) => {
            document.getElementById(`score-val-${dim}`).innerText = val;
            if (type === 'current') {
                state.currentScores[dim] = parseInt(val);
                // åŒæ­¥æ›´æ–°æ„¿æ™¯åˆ†çš„åˆå§‹å€¼ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥Step2
                state.visionScores[dim] = parseInt(val); 
            } else {
                state.visionScores[dim] = parseInt(val);
            }
            updateChart(type);
        };
        window.goToStep2 = () => { saveJournal(1); state.step = 2; renderStep2(); };


        // --- Step 2: æ„¿æ™¯æç»˜ (Future Vision) ---
        function renderStep2() {
            updateProgress(50);

            let slidersHtml = state.dimensions.map(dim => `
                <div class="mb-4">
                    <div class="flex justify-between mb-1">
                        <label class="text-sm font-medium text-slate-700">${dim}</label>
                        <span class="text-sm font-bold text-vision-600" id="score-val-${dim}">${state.visionScores[dim]}</span>
                    </div>
                    <input type="range" min="1" max="10" value="${state.visionScores[dim]}" 
                        class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-vision-500"
                        oninput="updateScore('${dim}', this.value, 'vision')">
                </div>
            `).join('');

            contentDiv.innerHTML = `
                <div class="fade-in">
                    <h1 class="text-2xl font-bold text-slate-800 mb-2">ç¬¬ä¸‰æ­¥ï¼šæç»˜æ„¿æ™¯</h1>
                    <p class="text-slate-500 mb-6">ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠç›®å…‰æŠ•å‘æœªæ¥ã€‚ä¸ºäº†è¾¾åˆ°ä½ æƒ³è¦çš„çŠ¶æ€ï¼Œä½ å¸Œæœ›å„ä¸ªç»´åº¦æ˜¯å¤šå°‘åˆ†ï¼Ÿ(é»˜è®¤ä¸ºç°çŠ¶åˆ†)</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>${slidersHtml}</div>
                        <div class="flex items-center justify-center bg-slate-50 rounded-xl p-4">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>

                    <div class="mt-8 bg-orange-50 p-6 rounded-xl border-l-4 border-vision-500">
                        <h3 class="font-bold text-slate-800 mb-2">ğŸ‘‰ å…³äºæœªæ¥ï¼ˆ6ä¸ªæœˆ-1å¹´ï¼‰ï¼š</h3>
                        <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                            <li>å‡è®¾æ—¶é—´åˆ°äº†ï¼Œä¸€åˆ‡å¦‚æ„¿ï¼Œè¯·æè¿°ä¸€ä¸‹é‚£å¤©ä»æ—©åˆ°æ™šï¼Œä½ åº¦è¿‡äº†æ€æ ·å®Œç¾çš„ä¸€å¤©ï¼Ÿ</li>
                            <li>åœ¨é‚£ä¸ªç†æƒ³çŠ¶æ€é‡Œï¼Œä½ æˆä¸ºäº†ä¸€ä¸ªæ€æ ·çš„äººï¼Ÿä½ èº«ä¸Šå¤šäº†å“ªäº›ç°åœ¨æ²¡æœ‰çš„å“è´¨ï¼Ÿ</li>
                            <li>ä¸ºä»€ä¹ˆè¾¾åˆ°è¿™ä¸ªçŠ¶æ€å¯¹ä½ å¦‚æ­¤é‡è¦ï¼Ÿå®ƒæ»¡è¶³äº†ä½ å†…å¿ƒæ·±å¤„çš„ä»€ä¹ˆæ¸´æœ›ï¼Ÿ</li>
                        </ul>
                        ${createTextarea('journal-2', 'å°½æƒ…ç•…æƒ³ä½ çš„æœªæ¥...')}
                    </div>

                    <button onclick="goToStep3()" class="mt-6 w-full bg-vision-600 hover:bg-vision-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-vision-500/30 transition-all transform active:scale-95">
                        ä¸‹ä¸€æ­¥ï¼šå¯»æ‰¾æ æ†ç‚¹
                    </button>
                </div>
            `;
            initChart('vision'); // æ­¤æ—¶æ˜¾ç¤ºåŒå±‚å›¾
        }
        window.goToStep3 = () => { saveJournal(2); state.step = 3; renderStep3(); };


        // --- Step 3: å¯»æ‰¾æ æ†ç‚¹ (Leverage) ---
        function renderStep3() {
            updateProgress(70);
            
            // æ‰¾å‡º Gap æœ€å¤§çš„å‰3ä¸ª
            let gaps = state.dimensions.map(d => ({ dim: d, gap: state.visionScores[d] - state.currentScores[d] }));
            gaps.sort((a, b) => b.gap - a.gap);
            let topGaps = gaps.slice(0, 3).map(g => g.dim);

            let radioHtml = state.dimensions.map(dim => {
                let isTop = topGaps.includes(dim);
                return `
                <label class="flex items-center p-3 border rounded-lg cursor-pointer transition-all hover:bg-slate-50 ${isTop ? 'border-brand-200 bg-brand-50' : 'border-slate-200'}">
                    <input type="radio" name="focus" value="${dim}" class="w-4 h-4 text-brand-600 focus:ring-brand-500 border-gray-300" onclick="state.focusArea = '${dim}'">
                    <span class="ml-2 text-sm text-slate-700 ${isTop ? 'font-bold' : ''}">${dim} ${isTop ? '<span class="text-xs text-brand-500 ml-1">(æ¨è)</span>' : ''}</span>
                </label>
            `}).join('');

            contentDiv.innerHTML = `
                <div class="fade-in">
                    <h1 class="text-2xl font-bold text-slate-800 mb-2">ç¬¬å››æ­¥ï¼šå¯»æ‰¾æ æ†ç‚¹</h1>
                    <p class="text-slate-500 mb-6">ä¸è¦è¯•å›¾åŒæ—¶æå‡æ‰€æœ‰ä½åˆ†é¡¹ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°é‚£ä¸ªèƒ½æ’¬åŠ¨å…¨å±€çš„â€˜æ æ†ç‚¹â€™ã€‚</p>

                    <div class="flex items-center justify-center bg-slate-50 rounded-xl p-4 mb-6 h-64">
                         <canvas id="radarChart"></canvas>
                    </div>

                    <div class="mb-6">
                        <h3 class="font-bold text-slate-800 mb-3">è¯·é€‰æ‹© 1 ä¸ªä½ æœ€æƒ³åœ¨æ¥ä¸‹æ¥æ”¹å–„çš„é¢†åŸŸï¼š</h3>
                        <div class="grid grid-cols-2 gap-3">
                            ${radioHtml}
                        </div>
                    </div>

                    <div class="mt-8 bg-slate-50 p-6 rounded-xl border-l-4 border-slate-400">
                        <h3 class="font-bold text-slate-800 mb-2">ğŸ‘‰ æ·±åº¦æ€è€ƒï¼š</h3>
                        <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                            <li>åœ¨è¿™äº›ä½åˆ†é¡¹ä¸­ï¼Œå“ªä¸€é¡¹è®©ä½ æ­¤åˆ»æœ€ç—›è‹¦ã€æœ€æƒ³æ”¹å˜ï¼Ÿ</li>
                            <li>å¦‚æœåªé€‰æ‹©ä¸€ä¸ªé¢†åŸŸåœ¨æ˜å¹´ä¼˜å…ˆæ”¹å–„ï¼Œä½ ä¼šé€‰å“ªä¸ªï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
                            <li>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸ªé¢†åŸŸçš„å¾—åˆ†ä»ç°çŠ¶æé«˜åˆ°äº†æ„¿æ™¯åˆ†ï¼Œå®ƒä¼šå¯¹ä½ ç”Ÿæ´»çš„å…¶ä»–é¢†åŸŸï¼ˆæ¯”å¦‚äº‹ä¸šã€å®¶åº­ï¼‰äº§ç”Ÿä»€ä¹ˆç§¯æå½±å“ï¼Ÿ</li>
                        </ul>
                        ${createTextarea('journal-3', 'æˆ‘çš„æ€è€ƒ...')}
                    </div>

                    <button onclick="goToStep4()" class="mt-6 w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition-all transform active:scale-95">
                        ä¸‹ä¸€æ­¥ï¼šè®¾è®¡å¾®è¡ŒåŠ¨
                    </button>
                </div>
            `;
            initChart('vision'); // ä¿æŒåŒå±‚æ˜¾ç¤º
        }
        window.goToStep4 = () => { 
            if(!state.focusArea) { alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé‡ç‚¹é¢†åŸŸï¼'); return; }
            saveJournal(3); 
            state.step = 4; 
            renderStep4(); 
        };

        // --- Step 4: å¾®è¡ŒåŠ¨ (Micro Action) ---
        function renderStep4() {
            updateProgress(90);
            contentDiv.innerHTML = `
                <div class="fade-in">
                    <h1 class="text-2xl font-bold text-slate-800 mb-2">ç¬¬äº”æ­¥ï¼šå¾®è¡ŒåŠ¨è®¾è®¡</h1>
                    <p class="text-slate-500 mb-6">æŠŠå®å¤§çš„æ„¿æœ›æ‹†è§£ä¸ºâ€˜æœ¬å‘¨å†…å®Œæˆâ€™ä¸”â€˜å°åˆ°ä¸å¯èƒ½å¤±è´¥â€™çš„å¾®è¡ŒåŠ¨ã€‚</p>

                    <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-5 mb-8">
                        <h3 class="font-bold text-yellow-800 mb-3 flex items-center">
                            <span class="text-xl mr-2">ğŸ’¡</span> é˜¿å‘†çš„ä¸¾ä¾‹
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <strong class="text-slate-700 block mb-1">åœºæ™¯ï¼šå¥åº· (âŒ ç˜¦20æ–¤)</strong>
                                <span class="text-green-600">âœ… å¾®è¡ŒåŠ¨ï¼šæœ¬å‘¨å·¥ä½œæ—¥ï¼Œæ¯å¤©åˆé¥­åæ•£æ­¥10åˆ†é’Ÿã€‚</span>
                            </div>
                            <div>
                                <strong class="text-slate-700 block mb-1">åœºæ™¯ï¼šæˆé•¿ (âŒ è¯»50æœ¬ä¹¦)</strong>
                                <span class="text-green-600">âœ… å¾®è¡ŒåŠ¨ï¼šä»Šæ™šç¡å‰ç¿»å¼€ä¹¦è¯»1é¡µã€‚</span>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">é’ˆå¯¹ <span class="text-brand-600 font-bold">${state.focusArea}</span>ï¼Œæˆ‘çš„å¾®è¡ŒåŠ¨æ˜¯ï¼š</label>
                            <input type="text" id="action-what" class="w-full p-3 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:outline-none" placeholder="å…·ä½“åšä»€ä¹ˆï¼Ÿ(è¶Šå°è¶Šå¥½)">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">æ‰§è¡Œæ—¶é—´ä¸åœ°ç‚¹ï¼š</label>
                            <input type="text" id="action-when" class="w-full p-3 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:outline-none" placeholder="ä¾‹å¦‚ï¼šæ˜å¤©æ—©ä¸Š8ç‚¹ï¼Œåœ¨é¤æ¡Œæ—">
                        </div>
                    </div>

                    <div class="mt-6 space-y-2">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="rounded text-brand-600 focus:ring-brand-500">
                            <span class="text-sm text-slate-600">è¿™ä¸ªè¡ŒåŠ¨å°åˆ°ä¸éœ€è¦æ„å¿—åŠ›å°±èƒ½å®Œæˆã€‚</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="rounded text-brand-600 focus:ring-brand-500">
                            <span class="text-sm text-slate-600">æˆ‘å·²å°†å…¶å†™å…¥æ—¥ç¨‹è¡¨ã€‚</span>
                        </label>
                    </div>

                    <button onclick="goToStep5()" class="mt-8 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-green-500/30 transition-all transform active:scale-95">
                        ç”Ÿæˆæˆ‘çš„å¹³è¡¡æŠ¥å‘Š
                    </button>
                </div>
            `;
        }
        window.goToStep5 = () => {
            state.microAction.what = document.getElementById('action-what').value;
            state.microAction.when = document.getElementById('action-when').value;
            state.step = 5;
            renderStep5();
        };

        // --- Step 5: ç»“è¯­ (Summary) ---
        function renderStep5() {
            updateProgress(100);
            contentDiv.innerHTML = `
                <div class="fade-in text-center">
                    <div class="print-only mb-8 hidden">
                        <h1 class="text-3xl font-bold">æˆ‘çš„ç”Ÿå‘½å¹³è¡¡è½®</h1>
                        <p class="text-slate-500">${new Date().toLocaleDateString()}</p>
                    </div>

                    <h1 class="text-3xl font-bold text-slate-800 mb-2 no-print">ä½ çš„è§‰å¯Ÿä¹‹æ—…å®Œæˆäº†</h1>
                    <p class="text-slate-500 mb-8 no-print">å¹³è¡¡ä¸æ˜¯é™æ­¢çš„ï¼Œè€Œæ˜¯åŠ¨æ€çš„è°ƒæ•´ã€‚å½“ä½ å¼€å§‹è§‰å¯Ÿï¼Œä½ å°±æ‹¿å›äº†ä¸»åŠ¨æƒã€‚</p>

                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 mb-8 flex justify-center">
                         <div class="w-full max-w-[500px] h-[400px]">
                             <canvas id="radarChart"></canvas>
                         </div>
                    </div>

                    <div class="bg-brand-50 border border-brand-100 rounded-xl p-6 text-left mb-8 break-inside-avoid">
                        <h3 class="text-brand-800 font-bold mb-4 border-b border-brand-200 pb-2">ğŸš€ æˆ‘çš„è¡ŒåŠ¨æ‰¿è¯º</h3>
                        <div class="mb-4">
                            <span class="text-xs font-bold text-brand-400 uppercase tracking-wider">æ ¸å¿ƒæ æ†ç‚¹</span>
                            <p class="text-xl font-bold text-slate-800">${state.focusArea}</p>
                        </div>
                        <div class="mb-2">
                            <span class="text-xs font-bold text-brand-400 uppercase tracking-wider">å¾®è¡ŒåŠ¨</span>
                            <p class="text-lg text-slate-800">${state.microAction.what || 'æœªå¡«å†™'}</p>
                        </div>
                        <div>
                            <span class="text-xs font-bold text-brand-400 uppercase tracking-wider">æ—¶é—´/åœ°ç‚¹</span>
                            <p class="text-slate-600">${state.microAction.when || 'æœªå¡«å†™'}</p>
                        </div>
                    </div>

                    <div class="flex gap-4 no-print">
                        <button onclick="window.print()" class="flex-1 bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition-all">
                            ä¿å­˜/æ‰“å°æŠ¥å‘Š
                        </button>
                        <button onclick="location.reload()" class="flex-1 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 font-bold py-3 px-6 rounded-xl transition-all">
                            é‡æ–°å¼€å§‹
                        </button>
                    </div>
                </div>
            `;
            // ç¨ç­‰DOMæ¸²æŸ“åå†ç”»å›¾
            setTimeout(() => initChart('vision'), 100);
        }


        // --- Chart.js é€»è¾‘ ---
        function initChart(mode) {
            const ctx = document.getElementById('radarChart');
            if(!ctx) return;
            
            if (myChart) myChart.destroy();

            const labels = state.dimensions;
            const currentData = labels.map(d => state.currentScores[d]);
            const visionData = labels.map(d => state.visionScores[d]);

            const datasets = [{
                label: 'ç°çŠ¶',
                data: currentData,
                backgroundColor: 'rgba(14, 165, 233, 0.2)', // brand-500 with opacity
                borderColor: 'rgba(14, 165, 233, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(14, 165, 233, 1)',
            }];

            if (mode === 'vision') {
                datasets.push({
                    label: 'æ„¿æ™¯',
                    data: visionData,
                    backgroundColor: 'rgba(249, 115, 22, 0)', // Transparent
                    borderColor: 'rgba(249, 115, 22, 1)', // Orange
                    borderWidth: 2,
                    borderDash: [5, 5], // Dashed line
                    pointBackgroundColor: 'rgba(249, 115, 22, 1)',
                    pointStyle: 'rectRot'
                });
            }

            myChart = new Chart(ctx, {
                type: 'radar',
                data: { labels, datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#e2e8f0' },
                            grid: { color: '#e2e8f0' },
                            pointLabels: {
                                font: { size: 12, family: "'Noto Sans SC', sans-serif" },
                                color: '#64748b'
                            },
                            suggestedMin: 0,
                            suggestedMax: 10,
                            ticks: { display: false, stepSize: 2 }
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        // å¯åŠ¨åº”ç”¨
        init();

    </script>
</body>
</html>